@model List<RealEstateManagementSystem.Models.Property>
@{
    ViewData["Title"] = "Home - DhanLakshmi Estates";
    var userName = User.Identity?.IsAuthenticated == true ? User.Identity.Name : "Guest";
    var hour = DateTime.Now.Hour;
    string greeting = hour < 12 ? "Good Morning" : hour < 17 ? "Good Afternoon" : "Good Evening";
}

<!-- Animated Background -->
<style>
    .animated-home-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        z-index: -1;
        background: linear-gradient(135deg, #0a1929 0%, #1a237e 25%, #283593 50%, #1e3c72 75%, #2a5298 100%);
        background-size: 300% 300%;
        animation: gradientWave 20s ease infinite;
    }
    
    @@keyframes gradientWave {
        0% { background-position: 0% 50%; }
        25% { background-position: 50% 75%; }
        50% { background-position: 100% 50%; }
        75% { background-position: 50% 25%; }
        100% { background-position: 0% 50%; }
    }
    
    .particles-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        z-index: -1;
        overflow: hidden;
    }
    
    .particle {
        position: absolute;
        width: 6px;
        height: 6px;
        background: rgba(100, 181, 246, 0.9);
        border-radius: 50%;
        box-shadow: 0 0 15px rgba(66, 165, 245, 0.8);
        animation: particleFloat 15s infinite;
    }
    
    .particle:nth-child(1) { left: 5%; animation-duration: 12s; animation-delay: 0s; }
    .particle:nth-child(2) { left: 15%; animation-duration: 18s; animation-delay: 2s; }
    .particle:nth-child(3) { left: 25%; animation-duration: 14s; animation-delay: 1s; }
    .particle:nth-child(4) { left: 35%; animation-duration: 16s; animation-delay: 3s; }
    .particle:nth-child(5) { left: 45%; animation-duration: 13s; animation-delay: 1.5s; }
    .particle:nth-child(6) { left: 55%; animation-duration: 17s; animation-delay: 2.5s; }
    .particle:nth-child(7) { left: 65%; animation-duration: 15s; animation-delay: 0.5s; }
    .particle:nth-child(8) { left: 75%; animation-duration: 19s; animation-delay: 1.8s; }
    .particle:nth-child(9) { left: 85%; animation-duration: 14s; animation-delay: 2.2s; }
    .particle:nth-child(10) { left: 95%; animation-duration: 16s; animation-delay: 0.8s; }
    
    @@keyframes particleFloat {
        0% {
            transform: translateY(100vh) scale(0);
            opacity: 0;
        }
        10% {
            opacity: 1;
        }
        90% {
            opacity: 1;
        }
        100% {
            transform: translateY(-100px) scale(1);
            opacity: 0;
        }
    }
    
    .floating-shapes {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        z-index: -1;
        overflow: hidden;
    }
    
    .shape {
        position: absolute;
        opacity: 0.1;
        animation: float 20s infinite ease-in-out;
    }
    
    .shape:nth-child(1) {
        left: 10%;
        animation-delay: 0s;
        animation-duration: 15s;
    }
    
    .shape:nth-child(2) {
        left: 30%;
        animation-delay: 3s;
        animation-duration: 18s;
    }
    
    .shape:nth-child(3) {
        left: 50%;
        animation-delay: 1s;
        animation-duration: 20s;
    }
    
    .shape:nth-child(4) {
        left: 70%;
        animation-delay: 4s;
        animation-duration: 16s;
    }
    
    .shape:nth-child(5) {
        left: 90%;
        animation-delay: 2s;
        animation-duration: 19s;
    }
    
    @@keyframes float {
        0%, 100% {
            transform: translateY(100vh) rotate(0deg);
        }
        50% {
            transform: translateY(-20vh) rotate(180deg);
        }
    }
    
    .greeting-banner {
        background: rgba(26, 35, 126, 0.85);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 20px 30px;
        box-shadow: 0 8px 32px rgba(66, 165, 245, 0.3);
        margin-bottom: 30px;
        border-left: 5px solid #64b5f6;
    }
    
    .greeting-text {
        font-size: 1.5rem;
        font-weight: 600;
        color: #90caf9;
        margin: 0;
    }
    
    .hero-section {
        position: relative;
        background: transparent !important;
    }
</style>

<!-- Animated Background Elements -->
<div class="animated-home-bg"></div>
<div class="particles-container">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
</div>

<!-- Hero Section -->
<div class="hero-section">
    <div class="container text-center">
        @if (User.Identity?.IsAuthenticated == true)
        {
            <div class="greeting-banner">
                <p class="greeting-text">
                    <i class="bi bi-emoji-smile me-2"></i>
                    @greeting, @userName!
                </p>
            </div>
        }
        <h1 class="hero-title" style="color: white; text-shadow: 2px 2px 8px rgba(0,0,0,0.3);">Find Your Dream Home</h1>
        <p class="hero-subtitle" style="color: white; text-shadow: 1px 1px 4px rgba(0,0,0,0.3);">Discover the perfect property from our extensive collection</p>
    </div>
</div>

<!-- Search Box -->
<div class="container">
    <div class="search-box">
        <form asp-controller="Property" asp-action="Index" method="get">
            <div class="row g-3">
                <div class="col-md-4">
                    <input type="text" name="SearchTerm" class="form-control" placeholder="Search by location or keyword...">
                </div>
                <div class="col-md-3">
                    <select name="PropertyType" class="form-select">
                        <option value="">Property Type</option>
                        <option value="House">House</option>
                        <option value="Apartment">Apartment</option>
                        <option value="Condo">Condo</option>
                        <option value="Commercial">Commercial</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <input type="number" name="MaxPrice" class="form-control" placeholder="Max Price">
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="bi bi-search me-1"></i>Search
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Featured Properties -->
<div class="container my-5">
    <div class="text-center mb-5">
        <h2 class="fw-bold">Featured Properties</h2>
        <p class="text-muted">Explore our handpicked selection of premium properties</p>
    </div>
    
    <div class="row">
        @if (Model != null && Model.Any())
        {
            @foreach (var property in Model)
            {
                <div class="col-md-4 mb-4">
                    <div class="card property-card">
                        @{
                            var primaryImage = property.PropertyImages?.FirstOrDefault(i => i.IsPrimary) ?? property.PropertyImages?.FirstOrDefault();
                        }
                        @if (primaryImage != null)
                        {
                            <img src="@primaryImage.ImageUrl" class="card-img-top" alt="@property.Title" onerror="this.src='/images/placeholder.jpg'">
                        }
                        else
                        {
                            <img src="/images/placeholder.jpg" class="card-img-top" alt="@property.Title">
                        }
                        
                        @if (property.IsFeatured)
                        {
                            <span class="badge bg-warning property-badge">Featured</span>
                        }
                        
                        <div class="card-body">
                            <h5 class="card-title">@property.Title</h5>
                            <p class="text-muted mb-2">
                                <i class="bi bi-geo-alt-fill"></i> @property.City, @property.State
                            </p>
                            <p class="property-price">$@property.Price.ToString("N0")</p>
                            
                            <div class="property-features">
                                <span class="property-feature">
                                    <i class="bi bi-door-closed-fill"></i> @property.Bedrooms Beds
                                </span>
                                <span class="property-feature">
                                    <i class="bi bi-droplet-fill"></i> @property.Bathrooms Baths
                                </span>
                                <span class="property-feature">
                                    <i class="bi bi-arrows-fullscreen"></i> @property.Area sq ft
                                </span>
                            </div>
                            
                            <a asp-controller="Property" asp-action="Details" asp-route-id="@property.PropertyId" class="btn btn-primary w-100 mt-3">
                                View Details
                            </a>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="col-12 text-center">
                <p class="text-muted">No properties available at the moment.</p>
            </div>
        }
    </div>
    
    <div class="text-center mt-4">
        <a asp-controller="Property" asp-action="Index" class="btn btn-outline-primary btn-lg">
            View All Properties <i class="bi bi-arrow-right ms-2"></i>
        </a>
    </div>
</div>

<!-- Features Section -->
<div class="bg-light py-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-4 mb-4">
                <i class="bi bi-house-check-fill text-primary" style="font-size: 3rem;"></i>
                <h4 class="mt-3">Quality Properties</h4>
                <p class="text-muted">Carefully selected homes that meet the highest standards</p>
            </div>
            <div class="col-md-4 mb-4">
                <i class="bi bi-shield-check text-primary" style="font-size: 3rem;"></i>
                <h4 class="mt-3">Secure Transactions</h4>
                <p class="text-muted">Safe and transparent property buying process</p>
            </div>
            <div class="col-md-4 mb-4">
                <i class="bi bi-headset text-primary" style="font-size: 3rem;"></i>
                <h4 class="mt-3">24/7 Support</h4>
                <p class="text-muted">Dedicated support team ready to assist you</p>
            </div>
        </div>
    </div>
</div>
