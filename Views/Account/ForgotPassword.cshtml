@{
    ViewData["Title"] = "Forgot Password";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forgot Password - DhanLakshmi Estates</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="~/css/site.css" />
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .animated-background {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            background: linear-gradient(-45deg, #1e3c72, #2a5298, #7e22ce, #4facfe);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        @@keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .forgot-container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }
        
        .forgot-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: none;
        }
    </style>
</head>
<body>

    <!-- Animated Background -->
    <div class="animated-background"></div>

    <div class="forgot-container">
        <div class="col-md-5 col-lg-4">
            <div class="card forgot-card">
                <div class="card-body p-5">
                    <div class="text-center mb-4">
                        <img src="/images/logo.png" alt="DhanLakshmi Estates" style="height: 100px; margin-bottom: 10px;" onerror="this.style.display='none'">
                        <h2 class="fw-bold mt-3" style="color: #1e3c72;">Forgot Password?</h2>
                        <p class="text-muted">Follow the steps below to reset your password</p>
                    </div>

                    <!-- Step-by-Step Instructions -->
                    <div class="alert alert-info">
                        <h6 class="fw-bold"><i class="bi bi-info-circle me-2"></i>Password Reset Instructions:</h6>
                        <ol class="mb-0 mt-2">
                            <li>Enter your registered email address below</li>
                            <li>Click "Send Reset Instructions"</li>
                            <li>Contact admin at <strong>admin@realestate.com</strong></li>
                            <li>Provide your email and request a password reset</li>
                            <li>Admin will reset your password and send you new credentials</li>
                        </ol>
                    </div>

                    @if (ViewBag.ShowInstructions == true)
                    {
                        <div class="alert alert-success">
                            <h5 class="alert-heading"><i class="bi bi-check-circle me-2"></i>Request Submitted!</h5>
                            <p class="mb-3"><strong>Email:</strong> @ViewBag.Email</p>
                            <hr>
                            <h6 class="fw-bold mt-3">Next Steps to Reset Your Password:</h6>
                            <ol class="mb-2">
                                <li class="mb-2">
                                    <strong>Contact Admin:</strong> Send an email to <a href="mailto:admin@realestate.com" class="alert-link">admin@realestate.com</a>
                                </li>
                                <li class="mb-2">
                                    <strong>Email Subject:</strong> "Password Reset Request for @ViewBag.Email"
                                </li>
                                <li class="mb-2">
                                    <strong>Email Body:</strong> Include your full name and registered email address
                                </li>
                                <li class="mb-2">
                                    <strong>Verification:</strong> Admin may ask security questions to verify your identity
                                </li>
                                <li class="mb-2">
                                    <strong>New Password:</strong> Admin will reset your password and send new login credentials
                                </li>
                                <li class="mb-2">
                                    <strong>Login:</strong> Use the new credentials to login
                                </li>
                                <li class="mb-0">
                                    <strong>Update:</strong> Change your password immediately after first login from your profile
                                </li>
                            </ol>
                            <hr>
                            <div class="text-center mt-3">
                                <a href="mailto:admin@realestate.com?subject=Password Reset Request for @ViewBag.Email" class="btn btn-success">
                                    <i class="bi bi-envelope me-2"></i>Email Admin Now
                                </a>
                                <a asp-action="Login" class="btn btn-outline-primary ms-2">
                                    <i class="bi bi-arrow-left me-2"></i>Back to Login
                                </a>
                            </div>
                        </div>
                    }
                    else
                    {

                    <form asp-action="ForgotPassword" method="post">
                        @Html.AntiForgeryToken()
                        
                        <div asp-validation-summary="All" class="alert alert-danger" role="alert"></div>

                        <div class="mb-4">
                            <label for="email" class="form-label">Email Address</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="bi bi-envelope-fill"></i></span>
                                <input type="email" id="email" name="email" class="form-control" placeholder="Enter your registered email" required />
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary w-100 py-2 mb-3">
                            <i class="bi bi-send me-2"></i>Send Reset Instructions
                        </button>

                        <hr />

                        <div class="text-center">
                            <p class="text-muted mb-0">Remember your password?</p>
                            <a asp-action="Login" class="btn btn-outline-primary mt-2">
                                <i class="bi bi-arrow-left me-2"></i>Back to Login
                            </a>
                        </div>
                    </form>
                    }
                </div>
            </div>

            <div class="text-center mt-3">
                <small class="text-white bg-dark bg-opacity-75 px-3 py-2 rounded">
                    <i class="bi bi-info-circle me-1"></i>
                    For assistance, contact: <strong>admin@realestate.com</strong>
                </small>
            </div>
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
